# Pastebin Clone

## Описание

Этот проект представляет собой клон популярного сервиса Pastebin, предназначенного для хранения и обмена текстовыми блоками.  
Проект создан для практики разработки современных микросервисных приложений с использованием Python и связанных технологий.

Пользователь может:
1. Создать текстовый блок с временным сроком хранения.
2. Получить уникальную короткую ссылку для доступа к тексту.
3. Поделиться ссылкой с другими.
4. Указать срок жизни текста (TTL), после которого он автоматически удаляется.

---

## Архитектура

Проект следует микросервисной архитектуре и включает следующие компоненты:
- **NGINX (Load Balancer):** обеспечивает распределение запросов между сервисами.
- **FastAPI:** основа API-сервиса.
- **Redis:** используется как кэш для ускорения доступа к часто запрашиваемым данным.
- **Google Cloud Storage:** хранилище для текстовых данных.
- **PostgreSQL:** база данных для хранения метаданных (ссылки, TTL, статистика).
- **Celery:** выполняет фоновые задачи, такие как очистка истёкших данных.
- **Prometheus + Grafana:** система мониторинга и визуализации.

Подробное описание архитектуры можно найти в документе [architecture_document.md](architecture_document.md).

---

## Установка и запуск

### Предварительные требования

- Python 3.12
- Redis
- PostgreSQL
- Google Cloud Storage (учётная запись и bucket)
- Docker (для запуска NGINX, Prometheus, Grafana)

### Установка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/your-username/pastebin-clone.git
   cd pastebin-clone
   ```

2. Настройте переменные окружения:
   Создайте файл `.env` и заполните его следующими параметрами:
   ```
   DATABASE_URL=postgresql://user:password@db:5432/pastebin
   REDIS_URL=redis://redis:6379/0
   ```
   Или скопируйте `.env.example`

4. Запустите сборку docker-compose: 
```bash
docker-compose up --build
```

---

## Технологический стек

- **Язык программирования:** Python
- **API:** FastAPI
- **База данных:** PostgreSQL
- **Кэш:** Redis, Redis Sentinel
- **Хранилище данных:** Google Cloud Storage
- **Фоновые задачи:** Celery
- **Балансировка нагрузки:** NGINX
- **Мониторинг:** Prometheus + Grafana

---

## Лицензия

Этот проект распространяется под лицензией MIT. Полный текст лицензии можно найти в файле [LICENSE](LICENSE).

---

## Документация

- **Архитектура:** [architecture_document.md](architecture_document.md)
- **Лицензия:** [LICENSE](LICENSE)

---

## Вклад в проект

Вы можете свободно использовать и модифицировать этот проект. Если у вас есть предложения по улучшению, открывайте Issue или делайте Pull Request.

---

- Обновил использование докера до в 2. Надо запускать композ без дефиса и тп
- Решение для логирования - Grafana + Prometheus + Loki
1. Prometheus для сбора метрик
Prometheus собирает метрики с ваших микросервисов и систем. Он будет:

Мониторить состояние приложения (количество запросов, время ответа, ошибки).
Собирать метрики Kubernetes (через kube-state-metrics и node-exporter).
Хранить данные для анализа производительности и нагрузочного тестирования.

2. Loki для логирования
Loki агрегирует логи из микросервисов. Он работает с логами, генерируемыми вашими приложениями, и интегрируется с Kubernetes для автоматического сбора stdout логов.

3. Grafana для визуализации
Grafana будет использоваться для:

Создания дашбордов с графиками метрик Prometheus.
Просмотра логов из Loki.
Настройки алертов на основе метрик или логов.

- Сделать сохранение логов в файл и\или использовать сервисы. Углубиться и реализовывать